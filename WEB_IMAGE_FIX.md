# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (Android)  
‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏ (–±—Ä–∞—É–∑–µ—Ä)  

## –ü—Ä–∏—á–∏–Ω–∞

–í –±—Ä–∞—É–∑–µ—Ä–µ Flutter Web –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç CORS (Cross-Origin Resource Sharing). –î–∞–∂–µ –µ—Å–ª–∏ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `*`, –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑-–∑–∞:
1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ –æ—Ç –Ø–Ω–¥–µ–∫—Å Object Storage
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –¥–ª—è –¥–æ–º–µ–Ω–∞ Vercel
3. –ü—Ä–æ–±–ª–µ–º —Å `crossOrigin` –∞—Ç—Ä–∏–±—É—Ç–æ–º –≤ HTML

## –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–∞: https://console.cloud.yandex.ru/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Object Storage** ‚Üí –≤–∞—à –±–∞–∫–µ—Ç (`mychatimage`)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"CORS"**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ:
   ```
   –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏: *
   –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã: GET, HEAD, OPTIONS
   –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏: *
   –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç: 3600
   ```
5. –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ –µ—Å—Ç—å, –Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã:
   ```
   –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏: 
     - https://my-chat-app.vercel.app
     - https://my-chat-app-estellias-projects.vercel.app
     - http://localhost:3000
     - http://localhost:8080
   ```

## –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø

**–í–ê–ñ–ù–û!** –≠—Ç–æ —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã!

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–∞–∫–µ—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ **"–¢–∏–ø –¥–æ—Å—Ç—É–ø–∞"**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ **"–ü—É–±–ª–∏—á–Ω—ã–π"** (–Ω–µ "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π")
3. –ï—Å–ª–∏ "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π" - –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ "–ü—É–±–ª–∏—á–Ω—ã–π" –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ

## –†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network**
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
4. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (—Ñ–∏–ª—å—Ç—Ä: Img)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - **Status**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `200 OK`
   - **Headers** ‚Üí **Response Headers**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `Access-Control-Allow-Origin: *`
   - –ï—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –Ω–µ—Ç - CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## –†–µ—à–µ–Ω–∏–µ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
4. –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏:
   - `CORS policy` - –ø—Ä–æ–±–ª–µ–º–∞ —Å CORS
   - `403 Forbidden` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
   - `Failed to load image` - –æ–±—â–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ CORS

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console):

```javascript
// –ó–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const imgUrl = 'https://mychatimage.storage.yandexcloud.net/images/image-xxx.jpg';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
fetch(imgUrl, { method: 'HEAD', mode: 'cors' })
  .then(r => {
    console.log('‚úÖ Status:', r.status);
    console.log('‚úÖ CORS Header:', r.headers.get('Access-Control-Allow-Origin'));
    console.log('‚úÖ Content-Type:', r.headers.get('Content-Type'));
    console.log('‚úÖ All Headers:', [...r.headers.entries()]);
  })
  .catch(e => {
    console.error('‚ùå CORS Error:', e);
    console.error('   –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
  });

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const img = new Image();
img.crossOrigin = 'anonymous'; // –í–∞–∂–Ω–æ –¥–ª—è CORS!
img.onload = () => {
  console.log('‚úÖ Image loaded successfully');
  console.log('   Width:', img.width, 'Height:', img.height);
};
img.onerror = (e) => {
  console.error('‚ùå Image load error:', e);
  console.error('   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–µ');
};
img.src = imgUrl;
```

## –ß—Ç–æ —è –∏—Å–ø—Ä–∞–≤–∏–ª –≤ –∫–æ–¥–µ

1. ‚úÖ –î–æ–±–∞–≤–∏–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –≤ `Image.network`
2. ‚úÖ –£–ª—É—á—à–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –¥–ª—è –≤–µ–±
3. ‚úÖ –î–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É `kIsWeb` –¥–ª—è –≤–µ–±-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

## –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∫–µ—Ç—É** (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –≤—Ä—É—á–Ω—É—é –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–∞ (–¥–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω—ã Vercel)
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
5. –°—Ç–∞—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

## –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

–ü—Ä–∏—à–ª–∏—Ç–µ:
1. –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ CORS –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–∞
2. –°–∫—Ä–∏–Ω—à–æ—Ç —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞ –±–∞–∫–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "–ü—É–±–ª–∏—á–Ω—ã–π")
3. –°–∫—Ä–∏–Ω—à–æ—Ç Network –∑–∞–ø—Ä–æ—Å–∞ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (F12 ‚Üí Network ‚Üí Img)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ CORS –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–∫–æ–¥ –≤—ã—à–µ)
5. –û—à–∏–±–∫–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)

