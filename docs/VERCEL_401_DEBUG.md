# üîç –û—Ç–ª–∞–¥–∫–∞ –æ—à–∏–±–∫–∏ 401 –Ω–∞ Vercel

## –ü—Ä–æ–±–ª–µ–º–∞

–ù–∞ Vercel (–≤–µ–±) –≤—ã–¥–∞–µ—Ç 401 - –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤. –í Android Studio –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### –ö–ª–∏–µ–Ω—Ç (Flutter):
1. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
2. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
3. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
4. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞

### –°–µ—Ä–≤–µ—Ä (Node.js):
1. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞
2. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ JWT
3. ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)

### 2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
‚úÖ Login —É—Å–ø–µ—à–µ–Ω, –ø–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ: ...
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞...
‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω: eyJhbGciOiJIUzI1NiIs...
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
‚ö†Ô∏è –¢–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ!
```
‚Üí –ü—Ä–æ–±–ª–µ–º–∞: —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–≤—Ö–æ–¥

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥: userId=..., email=...
‚úÖ –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω: eyJhbGciOiJIUzI1NiIs...
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
‚ö†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω:
  - hasData: false
  - data: null
```
‚Üí –ü—Ä–æ–±–ª–µ–º–∞: —Ç–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤–µ–±

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å —Ç–æ–∫–µ–Ω–æ–º: eyJhbGciOiJIUzI1NiIs...
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ë–ï–ó —Ç–æ–∫–µ–Ω–∞!
```
‚Üí –ü—Ä–æ–±–ª–µ–º–∞: —Ç–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–µ–Ω –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (Render.com)

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
üîê Auth check: GET /chats/123
   Authorization header: present
   Token: eyJhbGciOiJIUzI1NiIs...
‚úÖ JWT verified: userId=123, email=user@mail.com
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
‚ùå No token provided
```
‚Üí –ü—Ä–æ–±–ª–µ–º–∞: —Ç–æ–∫–µ–Ω –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
JWT verification error: ...
```
‚Üí –ü—Ä–æ–±–ª–µ–º–∞: —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –¢–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤–µ–±

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í–∏–¥–∏—Ç–µ "‚ö†Ô∏è –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ"
- –ê–≤—Ç–æ–≤—Ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
SharedPreferences –Ω–∞ –≤–µ–± –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Local Storage
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª—é—á `flutter.auth_token`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –¢–æ–∫–µ–Ω –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í–∏–¥–∏—Ç–µ "‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ë–ï–ó —Ç–æ–∫–µ–Ω–∞!"
- –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç 401

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `StorageService.getToken()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 3: CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏: "CORS policy"
- –ó–∞–ø—Ä–æ—Å—ã –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ - –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å "CORS: –†–∞–∑—Ä–µ—à–µ–Ω Vercel origin"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω Vercel –≤ ALLOWED_ORIGINS

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç 403 "–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω"
- –í –ª–æ–≥–∞—Ö: "JWT verification error: jwt expired"

**–†–µ—à–µ–Ω–∏–µ:**
- –í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ - —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 7 –¥–Ω–µ–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** (F12)
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏**
3. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏** - —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** –Ω–∞ Render.com
5. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª–æ–≥–∏**, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è

---

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.**

