# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –Ø–Ω–¥–µ–∫—Å Object Storage

## –ü—Ä–æ–±–ª–µ–º–∞

‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –Ø–Ω–¥–µ–∫—Å Object Storage  
‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏  

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –Ø–Ω–¥–µ–∫—Å Object Storage

**–°–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞!** –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑-–∑–∞ CORS –ø–æ–ª–∏—Ç–∏–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Object Storage** ‚Üí –≤–∞—à –±–∞–∫–µ—Ç (`mychatimage`)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"CORS"**
4. –ù–∞–∂–º–∏—Ç–µ **"–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS"**
5. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ:
   - **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**: `*` (–∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: `GET, HEAD, OPTIONS`
   - **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**: `*`
   - **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç**: `3600`
6. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

### 2. –ë–∞–∫–µ—Ç –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–∞–∫–µ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ **"–¢–∏–ø –¥–æ—Å—Ç—É–ø–∞"**
2. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **"–ü—É–±–ª–∏—á–Ω—ã–π"** (–Ω–µ "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π")
3. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π", –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ "–ü—É–±–ª–∏—á–Ω—ã–π"

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render.com –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: `Image uploaded successfully: https://...`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL
4. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç URL –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ
5. –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è - URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
6. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–∞–∫–µ—Ç–∞

### 4. –ü—Ä–æ–±–ª–µ–º–∞ —Å HTTPS/HTTP

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `YANDEX_STORAGE_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `https://` (–Ω–µ `http://`)
2. –§–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `https://mychatimage.storage.yandexcloud.net`

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Console** - –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ CORS:
   ```
   Access to image at 'https://...' from origin 'https://...' has been blocked by CORS policy
   ```

2. **Network** - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
   - –ï—Å–ª–∏ 403/404 - –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º
   - –ï—Å–ª–∏ CORS error - –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ó–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
fetch('https://mychatimage.storage.yandexcloud.net/images/image-xxx.jpg', {
  method: 'HEAD'
})
.then(r => {
  console.log('Status:', r.status);
  console.log('Headers:', [...r.headers.entries()]);
})
.catch(e => console.error('Error:', e));
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É CORS - –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –≤ –±–∞–∫–µ—Ç–µ.

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

–°–º. —Ä–∞–∑–¥–µ–ª "1. CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω" –≤—ã—à–µ.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø

–°–º. —Ä–∞–∑–¥–µ–ª "2. –ë–∞–∫–µ—Ç –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π" –≤—ã—à–µ.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render.com
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS:
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. –°—Ç–∞—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

1. ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —á–∞—Ç–µ
2. ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ
3. ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ CORS

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render.com - –∫–∞–∫–æ–π URL –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
2. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞–ø—Ä—è–º—É—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –∫–∞–∫–∏–µ –æ—à–∏–±–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∫–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—É–±–ª–∏—á–Ω—ã–π –∏ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω

