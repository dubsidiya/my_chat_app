# Исправления контроллеров

## Проблемы, которые были исправлены:

### 1. chatsController.js

#### Проблема: Несоответствие параметров запроса
- **Было**: Сервер ожидал `{ name, userId, memberIds }`
- **Стало**: Сервер принимает `{ name, userIds }` (как отправляет приложение)

#### Проблема: Неправильный статус ответа
- **Было**: Возвращал статус `200`
- **Стало**: Возвращает статус `201` (Created), как ожидает приложение

#### Проблема: Неправильное имя таблицы
- **Было**: Использовалась таблица `chat_members`
- **Стало**: Используется таблица `chat_users` (как в схеме БД)

### 2. messagesController.js

#### Проблема: Неправильное имя колонки
- **Было**: Использовалась колонка `sender_id`
- **Стало**: Используется колонка `user_id` (как в схеме БД)

#### Проблема: Несоответствие параметров запроса
- **Было**: Сервер ожидал `{ chatId, senderId, content }`
- **Стало**: Сервер принимает `{ user_id, chat_id, content }` (как отправляет приложение)

## Что нужно сделать на сервере:

1. **Обновить контроллеры** - замените файлы в папке `controllers/` на исправленные версии
2. **Проверить таблицы в БД** - убедитесь, что используется `chat_users`, а не `chat_members`
3. **Проверить колонки в messages** - убедитесь, что используется `user_id`, а не `sender_id`

## Если таблицы называются по-другому:

Если в вашей БД таблица называется `chat_members` вместо `chat_users`:

1. Либо переименуйте таблицу в БД:
```sql
ALTER TABLE chat_members RENAME TO chat_users;
```

2. Либо верните в контроллере использование `chat_members` (но тогда нужно обновить схему БД)

Аналогично для колонки `sender_id` в таблице `messages`:
```sql
ALTER TABLE messages RENAME COLUMN sender_id TO user_id;
```

## Проверка после исправлений:

1. Создание чата должно работать
2. Получение списка чатов должно работать
3. Отправка сообщений должна работать
4. Получение сообщений должно работать

