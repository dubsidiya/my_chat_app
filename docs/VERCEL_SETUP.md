# Настройка Vercel для автоматического деплоя

## Проблема
Три разных URL показывают разные версии приложения:
- `my-chat-app-estellias-projects.vercel.app` (Production)
- `my-chat-app-git-main-estellias-projects.vercel.app` (Preview для main)
- `my-chat-6sf9au4t0-estellias-projects.vercel.app` (Preview для коммита)

## Решение

### Вариант 1: Через раздел Deployments (РЕКОМЕНДУЕТСЯ)

1. Перейдите в ваш проект на Vercel: https://vercel.com/dashboard
2. Откройте вкладку **Deployments** (не Settings!)
3. Найдите последний деплоймент из ветки `main`
4. Нажмите на три точки (⋮) рядом с деплойментом
5. Выберите **"Promote to Production"**
6. После этого все новые коммиты в `main` будут автоматически деплоиться в Production

### Вариант 2: Через Settings → General

1. Перейдите в **Settings** → **General** (не Git!)
2. Найдите раздел **"Production Branch"**
3. Установите `main` как Production Branch
4. Сохраните изменения

### Вариант 3: Через Deploy Hooks (если не работает автоматика)

1. В **Settings** → **Git** найдите раздел **"Deploy Hooks"**
2. Создайте новый Deploy Hook:
   - **Name**: `deploy-main`
   - **Branch**: `main`
3. Используйте этот hook для автоматического деплоя

### Шаг 4: Проверка автоматического деплоя

После настройки:
1. Сделайте любой коммит в ветку `main`
2. Подождите 2-3 минуты
3. Проверьте вкладку **Deployments** - должен появиться новый деплоймент
4. Если он помечен как **Production** - всё работает!

### Шаг 4: Environment Variables

Убедитесь, что все переменные окружения установлены для:
- ✅ Production
- ✅ Preview (если нужно)
- ✅ Development (если нужно)

## Результат

После настройки:
- ✅ Каждый коммит в `main` автоматически деплоится в Production
- ✅ Production URL всегда показывает последнюю версию
- ✅ Preview URL для main также обновляется
- ✅ Все три URL будут показывать одну и ту же версию

## Проверка

После настройки:
1. Сделайте коммит в `main`
2. Подождите ~2-3 минуты
3. Проверьте все три URL - они должны показывать одинаковую версию

## Альтернативное решение: Отключить Preview деплойменты

Если хотите, чтобы preview деплойменты не создавались:

1. **Settings** → **Git**
2. Найдите раздел **"Preview Deployments"** (может быть в другом месте)
3. Или в **Settings** → **General** найдите настройки preview
4. Отключите создание preview деплойментов

Тогда будет только Production URL, который всегда показывает последнюю версию.

## Решение проблемы "Unverified Commit"

Если деплоймент отменен с сообщением **"The Deployment was canceled because it was created with an unverified commit"**:

### Быстрое решение (отключить проверку):

1. Перейдите в **Settings** → **Git**
2. Найдите раздел **"Require Verified Commits"**
3. **Отключите** эту опцию (Toggle должен быть выключен)
4. Сохраните изменения

После этого все коммиты будут деплоиться, даже если они не подписаны.

### Альтернатива (настроить verified commits):

Если хотите оставить проверку коммитов:

1. Настройте GPG подпись коммитов в Git
2. Или используйте GitHub's verified commits через веб-интерфейс

**Рекомендация**: Для начала отключите "Require Verified Commits", чтобы деплойменты работали.

## Важно!

**По умолчанию Vercel автоматически деплоит в Production только первый деплоймент.** 

Чтобы все последующие коммиты в `main` автоматически становились Production:

1. **Способ 1**: Промотируйте последний деплоймент из `main` в Production (через Deployments)
2. **Способ 2**: В настройках проекта установите `main` как Production Branch
3. **Способ 3**: Отключите "Require Verified Commits" (см. выше)

После этого каждый коммит в `main` будет автоматически деплоиться в Production, и все три URL будут показывать одну версию.

