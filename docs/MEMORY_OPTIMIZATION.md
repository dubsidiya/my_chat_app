# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

## –í–Ω–µ–¥—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. ‚úÖ –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_compressImage()` –≤ `chat_screen.dart`
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 1920px (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π)
- –ö–∞—á–µ—Å—Ç–≤–æ JPEG: 85% (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ä–∞–∑–º–µ—Ä/–∫–∞—á–µ—Å—Ç–≤–æ)

**–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏:**
- 50-80% —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```dart
// –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
bytes = await _compressImage(_selectedImageBytes!);
imageUrl = await _messagesService.uploadImage(bytes, fileName);
```

### 2. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã `cacheWidth` –∏ `cacheHeight` –≤ `Image.network`
- –î–ª—è –º–∏–Ω–∏–∞—Ç—é—Ä –≤ —á–∞—Ç–µ: 500x500px
- –î–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞: 1920x1920px

**–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏:**
- 60-90% —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ –º–µ–Ω—å—à–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏, —á–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª
- –ë—ã—Å—Ç—Ä–µ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```dart
Image.network(
  msg.imageUrl!,
  width: 250,
  cacheWidth: 500,   // –î–µ–∫–æ–¥–∏—Ä—É–µ–º –º–∞–∫—Å–∏–º—É–º 500px
  cacheHeight: 500,  // –î–µ–∫–æ–¥–∏—Ä—É–µ–º –º–∞–∫—Å–∏–º—É–º 500px
)
```

### 3. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- `_selectedImageBytes` –æ—á–∏—â–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è (–Ω–∞ –≤–µ–±)
- –ü–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏:**
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø–∞–º—è—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

### 4. ‚úÖ –£–º–µ–Ω—å—à–µ–Ω –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –õ–∏–º–∏—Ç —É–º–µ–Ω—å—à–µ–Ω —Å 10MB –¥–æ 5MB
- –ü–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —ç—Ç–æ–≥–æ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

**–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏:**
- –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–æ–≤
- –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 5MB –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å ‚Üí 5MB –≤ –ø–∞–º—è—Ç–∏
- –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ ‚Üí –µ—â–µ 20-30MB –≤ –ø–∞–º—è—Ç–∏
- **–ò—Ç–æ–≥–æ: ~25-35MB –Ω–∞ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ**

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 5MB —Å–∂–∏–º–∞–µ—Ç—Å—è –¥–æ ~1-2MB ‚Üí 1-2MB –≤ –ø–∞–º—è—Ç–∏
- –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤ 500x500px ‚Üí ~1MB –≤ –ø–∞–º—è—Ç–∏
- **–ò—Ç–æ–≥–æ: ~2-3MB –Ω–∞ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ**

**–≠–∫–æ–Ω–æ–º–∏—è: 85-90% –ø–∞–º—è—Ç–∏! üéâ**

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞–∫–µ—Ç –¥–ª—è —Å–∂–∞—Ç–∏—è
```yaml
dependencies:
  image: ^4.0.17  # –î–ª—è —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∂–∞—Ç–∏—è
- **maxWidth**: 1920px (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–æ–ª—å—à–µ —ç—Ç–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è)
- **quality**: 85% (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ä–∞–∑–º–µ—Ä/–∫–∞—á–µ—Å—Ç–≤–æ)
- **–§–æ—Ä–º–∞—Ç**: JPEG (–ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ú–∏–Ω–∏–∞—Ç—é—Ä—ã –≤ —á–∞—Ç–µ**: 500x500px (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- **–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä**: 1920x1920px (–¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cached_network_image`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ```yaml
   dependencies:
     cached_network_image: ^3.3.1
   ```
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –¥–∏—Å–∫–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):
   - `ListView.builder` –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤–∏–¥–Ω—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ

3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 50 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ —Ä–∞–∑
   - –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏ —Å–∂–∞—Ç–∏—è:
```
üì¶ –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: 5242880 ‚Üí 1048576 –±–∞–π—Ç (80.0% –º–µ–Ω—å—à–µ, 4000x3000 ‚Üí 1920x1440)
```

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∂–∞—Ç–∏—è.

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –ö–∞—á–µ—Å—Ç–≤–æ 85% –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–∑–º–µ—Ä–æ–º –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_compressImage()`.

2. **–†–∞–∑–º–µ—Ä –º–∏–Ω–∏–∞—Ç—é—Ä**: 500x500px –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —á–∞—Ç–µ. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 800px.

3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö (Android, iOS, Web).

4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—Ç–∞—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏) –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥—É—Ç —Å–∂–∞—Ç—ã.

